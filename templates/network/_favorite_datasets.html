{% extends 'base.html' %}

{% block content %}

<nav class="navbar navbar-sub">
    <div class="container">
        <ul class="nav navbar-nav">
            <li><a href="{% url 'recommended_datasets' %}">Recommendations <span id="recommended_counts" class="badge">{{dataset_counts.recommended_dataset_counts}}</span></a></li>
            <li><a href="{% url 'favorite_datasets' %}">Favorites <span id="favorite_counts" class="badge">{{dataset_counts.favorite_dataset_counts}}</span></a></li>
            <li><a href="{% url 'personal_datasets' %}">Personal datasets <span id="personal_counts" class="badge">{{dataset_counts.personal_dataset_counts}}</span></a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="{% url 'create_dataset' %}"><span class="glyphicon glyphicon-plus"></span> Add new dataset</a></li>
        </ul>
    </div>
</nav>

<div class="container container-fluid">
    <div id="processing_container"></div>
    <div id="experiment_container"></div>
</div>
{% endblock content %}

{% block extra-js %}
<script type='text/javascript'>
{% for i in datasets %}
{% if i.promoter_metaplot and i.enhancer_metaplot %}
$(document).ready(function(){
    window.apps.appendSmallFavoriteDataView(
        $('#experiment_container')[0],
        {{i.get_metadata|safe}},
        {{i.promoter_metaplot.meta_plot|safe}},
        {{i.enhancer_metaplot.meta_plot|safe}},
        '{% url 'dataset' i.pk %}',
        '{% url 'api:dataset-remove-favorite' i.pk %}'
    );
});
{% else %}
$('#processing_container').append(
    '<div class="alert alert-warning alert-dismissible">' +
    '<a href="#" class="close" data-dismiss="alert" aria-label="close">Ã—</a>' +
    '<b>{{i.name}}</b> is not displayed. Currently processing...</div>'
)
{% endif %}
{% endfor %}
</script>
{% endblock %}
