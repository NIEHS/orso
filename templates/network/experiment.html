{% extends 'base.html' %}

{% block content %}

<div class="container">
    <h3>{{experiment.name}}</h3>
    <div class="row">
        <div class="col-sm-8">
            {% if experiment.data_type %}
            <p>Data type: {{experiment.data_type}}</p>
            {% endif %}

            {% if experiment.cell_type %}
            <p>Cell type: {{experiment.cell_type}}</p>
            {% endif %}

            {% if experiment.target %}
            <p>Antibody: {{experiment.target}}</p>
            {% endif %}

            {% if experiment.description %}
            <p>Description: {{experiment.description|linebreaks}}</p>
            {% endif %}
        </div>
        <div class="col-sm-4">
            <a href="{% url 'similar_experiments' pk=experiment.pk %}" class="btn btn-primary btn-block">Similar experiments</a>
        </div>
    </div>
    <h2>Datasets</h2>
    {% for dataset in datasets %}
        <a href='/network/dataset/{{dataset.pk}}'>{{dataset.name}}</a><br>
    {% endfor %}
    <h2>Metagene plots</h2>
    <div id='metaplot_carousel'></div>
    <h2>Top 20 genes</h2>
    <div id='gene_values'></div>
</div>

{% endblock content %}

{% block extra-js %}
<script type='text/javascript'>
$(document).ready(function(){
    window.apps.appendMetaPlotCarousel(
        $('#metaplot_carousel')[0],
        {{plot_data|safe}},
    );
    window.apps.appendGeneValues(
        $('#gene_values')[0],
        {{gene_values|safe}},
    );
});
</script>
{% endblock %}
